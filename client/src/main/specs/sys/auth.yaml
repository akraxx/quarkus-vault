name: Auth
category: sys
mountable: false
basePath: sys

operations:

- name: list
  method: GET
  path: auth
  result:
    kind: leased
    dataType: java.util.Map<String, $MethodInfo>


- name: enable
  method: POST
  status: NO_CONTENT
  path: auth/:path
  bodyFrom: [type, description, config]
  parameters:
  - name: path
    type: String
  - name: type
    type: String
  - name: description
    type: String
  - name: config
    type: $EnableOptions


- name: read
  method: GET
  path: auth/:path
  parameters:
  - name: path
    type: String
  result:
    kind: leased
    dataType: $MethodInfo


- name: disable
  method: DELETE
  path: auth/:path
  parameters:
  - name: path
    type: String


- name: readTune
  method: GET
  path: auth/:path/tune
  parameters:
  - name: path
    type: String
  result:
    kind: leased
    dataType: $MethodInfo


- name: tune
  method: POST
  status: NO_CONTENT
  path: auth/:path/tune
  parameters:
  - name: path
    type: String
  - name: description
    type: String
  - name: config
    type: $TuneOptions


types:

- name: MethodInfo
  nested:
  - name: Config
    properties:
    - name: defaultLeaseTtl
      type: Long
    - name: maxLeaseTtl
      type: Long
    - name: forceNoCache
      type: Boolean
    - name: tokenType
      type: String
  properties:
  - name: accessor
    type: String
  - name: config
    type: $MethodInfo.Config
  - name: deprecationStatus
    type: String
  - name: description
    type: String
  - name: externalEntropyAccess
    type: Boolean
  - name: local
    type: Boolean
  - name: pluginVersion
    type: String
  - name: runningPluginVersion
    type: String
  - name: runningSha256
    type: String
  - name: sealWrap
    type: Boolean
  - name: type
    type: String
  - name: uuid
    type: String

- name: EnableOptions
  nested:
  properties:
  - name: defaultLeaseTtl
    type: String
  - name: maxLeaseTtl
    type: String
  - name: auditNonHmacRequestKeys
    type: java.util.List<String>
  - name: auditNonHmacResponseKeys
    type: java.util.List<String>
  - name: listingVisibility
    type: String
  - name: passthroughRequestHeaders
    type: java.util.List<String>
  - name: allowedResponseHeaders
    type: java.util.List<String>
  - name: pluginVersion
    type: String
  - name: local
    type: Boolean
  - name: sealWrap
    type: Boolean

- name: TuneOptions
  extends: $EnableOptions
  properties:
  - name: description
    type: String
  - name: tokenType
    type: String
  - name: userLockoutConfig
    type: Boolean
  nested:
  - name: UserLockoutConfig
    properties:
    - name: lockoutThreshold
      type: Integer
    - name: lockoutDuration
      type: String
    - name: lockoutCounterReset
      type: String
    - name: lockoutDisable
      type: Boolean
